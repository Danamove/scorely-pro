
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scorely Beta - LinkedIn Profile Ranker</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .top-candidate {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        .good-candidate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .hidden-gem {
            background: linear-gradient(135deg, #38ef7d 0%, #11998e 100%);
            color: white;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .tab-active {
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
        .radar-chart {
            height: 300px;
        }
        .insight-card {
            border-left: 4px solid #667eea;
        }
        .batch-indicator {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid #667eea;
        }
        .excellence-tag {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .ideal-profile-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: 2px dashed #f5576c;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="gradient-bg text-white p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <i class="fas fa-chart-line text-2xl"></i>
                <h1 class="text-2xl font-bold">Scorely Beta</h1>
                <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-sm">LinkedIn Profile Ranker</span>
            </div>
            <div class="flex space-x-4">
                <button id="resetBtn" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded transition-colors">
                    <i class="fas fa-redo mr-2"></i>Reset Session
                </button>
            </div>
        </div>
    </nav>

    <!-- Tab Navigation -->
    <div class="bg-white shadow-sm">
        <div class="container mx-auto">
            <div class="flex space-x-8">
                <button class="tab-btn tab-active px-6 py-4 font-semibold" data-tab="setup">
                    <i class="fas fa-cog mr-2"></i>Setup
                </button>
                <button class="tab-btn px-6 py-4 font-semibold text-gray-500" data-tab="ranking">
                    <i class="fas fa-chart-bar mr-2"></i>Ranking
                </button>
                <button class="tab-btn px-6 py-4 font-semibold text-gray-500" data-tab="results">
                    <i class="fas fa-trophy mr-2"></i>Results
                </button>
            </div>
        </div>
    </div>

    <!-- Setup Stage -->
    <div id="setup" class="tab-content">
        <div class="container mx-auto p-6 space-y-8">
            <!-- File Upload Section -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-file-upload mr-3 text-blue-500"></i>File Upload
                </h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Main CSV Upload -->
                    <div class="border-2 border-dashed border-blue-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                        <i class="fas fa-file-csv text-4xl text-blue-500 mb-4"></i>
                        <h3 class="font-semibold mb-2">Main CSV File</h3>
                        <p class="text-sm text-gray-600 mb-4">Upload LinkedIn profiles CSV</p>
                        <input type="file" id="mainCsv" accept=".csv" class="hidden">
                        <button onclick="document.getElementById('mainCsv').click()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                            Choose File
                        </button>
                        <div id="mainCsvStatus" class="mt-2 text-sm"></div>
                    </div>

                    <!-- Blacklist Upload -->
                    <div class="border-2 border-dashed border-red-300 rounded-lg p-6 text-center hover:border-red-400 transition-colors">
                        <i class="fas fa-ban text-4xl text-red-500 mb-4"></i>
                        <h3 class="font-semibold mb-2">Blacklist Companies</h3>
                        <p class="text-sm text-gray-600 mb-4">Companies to exclude</p>
                        <input type="file" id="blacklistCsv" accept=".csv" class="hidden">
                        <button onclick="document.getElementById('blacklistCsv').click()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                            Upload CSV
                        </button>
                        <div class="mt-4">
                            <textarea id="blacklistManual" placeholder="Or add manually: Google, Apple, Microsoft..." class="w-full p-2 border rounded text-sm" rows="3"></textarea>
                        </div>
                    </div>

                    <!-- Already in Process -->
                    <div class="border-2 border-dashed border-yellow-300 rounded-lg p-6 text-center hover:border-yellow-400 transition-colors">
                        <i class="fas fa-hourglass-half text-4xl text-yellow-500 mb-4"></i>
                        <h3 class="font-semibold mb-2">Already in Process</h3>
                        <p class="text-sm text-gray-600 mb-4">Candidates currently being processed</p>
                        <input type="file" id="inProcessCsv" accept=".csv" class="hidden">
                        <button onclick="document.getElementById('inProcessCsv').click()" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
                            Upload List
                        </button>
                        <div class="mt-4">
                            <textarea id="inProcessManual" placeholder="John Doe, Jane Smith..." class="w-full p-2 border rounded text-sm" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- File Processing Summary -->
                <div id="fileProcessingSummary" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                    <h4 class="font-semibold mb-2">Processing Summary:</h4>
                    <div class="grid md:grid-cols-4 gap-4 text-sm">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600" id="totalRows">847</div>
                            <div class="text-gray-600">Total Profiles</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-600" id="blacklistedRows">23</div>
                            <div class="text-gray-600">Blacklisted</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-600" id="inProcessRows">15</div>
                            <div class="text-gray-600">Already in Process</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="availableRows">809</div>
                            <div class="text-gray-600">Available for Ranking</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ideal Profiles Section -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-star mr-3 text-orange-500"></i>Ideal Profiles
                    <span class="ml-2 bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">Optional</span>
                </h2>
                <p class="text-gray-600 mb-6">Upload up to 2 ideal candidate profiles to help AI understand your perfect match criteria</p>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Ideal Profile 1 -->
                    <div class="ideal-profile-section rounded-lg p-6">
                        <h3 class="font-semibold mb-4 flex items-center">
                            <i class="fas fa-user-star mr-2 text-orange-600"></i>Ideal Profile #1
                        </h3>
                        
                        <!-- PDF Upload Option -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Upload PDF Profile</label>
                            <div class="border-2 border-dashed border-orange-300 rounded-lg p-4 text-center">
                                <i class="fas fa-file-pdf text-2xl text-orange-500 mb-2"></i>
                                <input type="file" id="idealPdf1" accept=".pdf" class="hidden">
                                <button onclick="document.getElementById('idealPdf1').click()" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 text-sm">
                                    Choose PDF File
                                </button>
                                <div id="idealPdf1Status" class="mt-2 text-sm"></div>
                            </div>
                        </div>

                        <!-- Copy-Paste Option -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Or Copy-Paste Profile (Ctrl+A)</label>
                            <textarea id="idealProfile1" placeholder="Paste complete LinkedIn profile here..." class="w-full p-3 border rounded-lg text-sm" rows="8"></textarea>
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>
                                Tip: Open the ideal candidate's LinkedIn profile, press Ctrl+A to select all content, then paste here
                            </p>
                        </div>
                    </div>

                    <!-- Ideal Profile 2 -->
                    <div class="ideal-profile-section rounded-lg p-6">
                        <h3 class="font-semibold mb-4 flex items-center">
                            <i class="fas fa-user-star mr-2 text-orange-600"></i>Ideal Profile #2
                        </h3>
                        
                        <!-- PDF Upload Option -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Upload PDF Profile</label>
                            <div class="border-2 border-dashed border-orange-300 rounded-lg p-4 text-center">
                                <i class="fas fa-file-pdf text-2xl text-orange-500 mb-2"></i>
                                <input type="file" id="idealPdf2" accept=".pdf" class="hidden">
                                <button onclick="document.getElementById('idealPdf2').click()" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 text-sm">
                                    Choose PDF File
                                </button>
                                <div id="idealPdf2Status" class="mt-2 text-sm"></div>
                            </div>
                        </div>

                        <!-- Copy-Paste Option -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Or Copy-Paste Profile (Ctrl+A)</label>
                            <textarea id="idealProfile2" placeholder="Paste complete LinkedIn profile here..." class="w-full p-3 border rounded-lg text-sm" rows="8"></textarea>
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>
                                Tip: Open the ideal candidate's LinkedIn profile, press Ctrl+A to select all content, then paste here
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Ideal Profiles Usage Note -->
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-start">
                        <i class="fas fa-lightbulb text-blue-500 mr-3 mt-1"></i>
                        <div>
                            <h4 class="font-semibold text-blue-800">How AI Uses Ideal Profiles:</h4>
                            <p class="text-sm text-blue-700 mt-1">
                                The AI will analyze these profiles to understand your preferences for experience level, 
                                skills, career progression, and company background. This helps create more accurate 
                                scoring that matches your specific requirements.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Job Description -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-briefcase mr-3 text-green-500"></i>Job Description
                </h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Job Description Text</label>
                        <textarea id="jobDescription" placeholder="Enter complete job description..." class="w-full p-4 border rounded-lg text-sm" rows="10"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Or Upload PDF</label>
                        <div class="border-2 border-dashed border-green-300 rounded-lg p-6 text-center">
                            <i class="fas fa-file-pdf text-3xl text-green-500 mb-4"></i>
                            <input type="file" id="jobDescPdf" accept=".pdf" class="hidden">
                            <button onclick="document.getElementById('jobDescPdf').click()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                                Upload PDF
                            </button>
                            <div id="jobDescPdfStatus" class="mt-2 text-sm"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Excellence Indicators -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-medal mr-3 text-purple-500"></i>Excellence Indicators
                </h2>
                <p class="text-gray-600 mb-6">Select factors that indicate exceptional candidates</p>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Academic Excellence -->
                    <div>
                        <h3 class="font-semibold mb-3 text-purple-700">Academic Excellence</h3>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="honors">
                                <span class="text-sm">Graduated with honors/distinction</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="awards">
                                <span class="text-sm">Industry awards/recognition</span>
                            </label>
                        </div>
                    </div>

                    <!-- Military & Leadership -->
                    <div>
                        <h3 class="font-semibold mb-3 text-purple-700">Military & Leadership</h3>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="military">
                                <span class="text-sm">Elite military unit experience</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="projects">
                                <span class="text-sm">High-impact projects</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="advancement">
                                <span class="text-sm">Rapid career advancement</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="excellence-indicator mr-2" value="publications">
                                <span class="text-sm">Publications/Patents</span>
                            </label>
                        </div>
                    </div>

                    <!-- Leadership Experience -->
                    <div>
                        <h3 class="font-semibold mb-3 text-purple-700">Leadership Experience</h3>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="leadership-experience mr-2" value="team-lead">
                                <span class="text-sm">Team Lead</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="leadership-experience mr-2" value="manager">
                                <span class="text-sm">Manager</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="leadership-experience mr-2" value="executive">
                                <span class="text-sm">Executive (VP/C-level)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="mt-6 p-4 bg-purple-50 rounded-lg">
                    <div class="flex items-start">
                        <i class="fas fa-info-circle text-purple-500 mr-3 mt-1"></i>
                        <div>
                            <p class="text-sm text-purple-700">
                                <strong>Tip:</strong> Our AI will look for keywords indicating these excellence factors in profiles. 
                                For example: "graduated summa cum laude", "promoted to lead in 6 months", "recognized with award".
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-filter mr-3 text-indigo-500"></i>Additional Filters
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Left Column -->
                    <div class="space-y-6">
                        <!-- Education -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Education Level</label>
                            <select id="educationLevel" class="w-full p-2 border rounded-lg">
                                <option value="">Any Education Level</option>
                                <option value="high-school">High School</option>
                                <option value="associate">Associate Degree</option>
                                <option value="bachelor">Bachelor's Degree</option>
                                <option value="master">Master's Degree</option>
                                <option value="phd">PhD/Doctorate</option>
                            </select>
                        </div>

                        <!-- Location -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Location</label>
                            <input type="text" id="location" placeholder="e.g. Tel Aviv, Remote, etc." class="w-full p-2 border rounded-lg">
                        </div>

                        <!-- Company Size -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Preferred Company Size</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" class="company-size mr-2" value="small">
                                    <span class="text-sm">Small (1-20 employees)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="company-size mr-2" value="medium">
                                    <span class="text-sm">Medium (21-100 employees)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="company-size mr-2" value="large">
                                    <span class="text-sm">Large (101-500 employees)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="company-size mr-2" value="enterprise">
                                    <span class="text-sm">Enterprise (500+ employees)</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="space-y-6">
                        <!-- Experience Range -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Experience Range (Years)</label>
                            <div class="flex space-x-4">
                                <input type="number" id="minExperience" placeholder="Min" class="w-full p-2 border rounded-lg" min="0">
                                <input type="number" id="maxExperience" placeholder="Max" class="w-full p-2 border rounded-lg" min="0">
                            </div>
                        </div>

                        <!-- Key Achievements -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Key Achievements (Keywords)</label>
                            <textarea id="keyAchievements" placeholder="e.g. scaled, launched, improved, led team, increased revenue..." class="w-full p-2 border rounded-lg text-sm" rows="3"></textarea>
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>
                                Examples: grew team by 200%, increased revenue, reduced costs by 40%, launched product, led architecture redesign
                            </p>
                        </div>

                        <!-- Additional Keywords -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Additional Keywords</label>
                            <textarea id="additionalKeywords" placeholder="Any other important keywords..." class="w-full p-2 border rounded-lg text-sm" rows="3"></textarea>
                            <p class="text-xs text-gray-500 mt-1">Other specific terms to prioritize in candidate ranking</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Ranking Enhancement -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-brain mr-3 text-pink-500"></i>AI Ranking Enhancement
                </h2>
                
                <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-start">
                        <i class="fas fa-robot text-blue-500 mr-3 mt-1"></i>
                        <div>
                            <h4 class="font-semibold text-blue-800">AI Understanding</h4>
                            <p class="text-sm text-blue-700 mt-1">
                                Our model will analyze profiles for indicators of excellence like rapid promotions, 
                                significant achievements, and recognition, even if not explicitly mentioned in keywords.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Provide specific instructions to improve the AI's ranking accuracy for your needs:</label>
                    <textarea id="aiInstructions" placeholder='Example: "Prioritize candidates who have worked with large-scale systems" or "Look for evidence of leadership in cross-functional teams"' class="w-full p-4 border rounded-lg text-sm" rows="4"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-3">Focus Areas</label>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div class="flex items-center justify-between p-3 border rounded-lg">
                            <span class="text-sm">Innovation focus</span>
                            <input type="range" class="focus-weight" data-focus="innovation" min="0" max="100" value="50">
                        </div>
                        <div class="flex items-center justify-between p-3 border rounded-lg">
                            <span class="text-sm">Initiative focus</span>
                            <input type="range" class="focus-weight" data-focus="initiative" min="0" max="100" value="50">
                        </div>
                        <div class="flex items-center justify-between p-3 border rounded-lg">
                            <span class="text-sm">Top company focus</span>
                            <input type="range" class="focus-weight" data-focus="company" min="0" max="100" value="50">
                        </div>
                        <div class="flex items-center justify-between p-3 border rounded-lg">
                            <span class="text-sm">Career growth focus</span>
                            <input type="range" class="focus-weight" data-focus="growth" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Model Configuration -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-cogs mr-3 text-gray-700"></i>Model Configuration
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Model Selection -->
                    <div>
                        <label class="block text-sm font-medium mb-3">Ranking Model</label>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="model" value="hybrid" class="mr-3" checked>
                                <div>
                                    <div class="font-medium">Hybrid (Recommended)</div>
                                    <div class="text-sm text-gray-600">30% Embedding + 70% GPT-4</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="model" value="embedding" class="mr-3">
                                <div>
                                    <div class="font-medium">Embedding Only</div>
                                    <div class="text-sm text-gray-600">Fast, cost-effective</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="model" value="gpt4" class="mr-3">
                                <div>
                                    <div class="font-medium">GPT-4 Only</div>
                                    <div class="text-sm text-gray-600">Highest quality, slower</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="model" value="custom" class="mr-3">
                                <div>
                                    <div class="font-medium">Custom Mix</div>
                                    <div class="text-sm text-gray-600">Manual weight adjustment</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- API Configuration -->
                    <div>
                        <label class="block text-sm font-medium mb-3">API Configuration</label>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">GPT API Key</label>
                                <input type="password" id="gptApiKey" placeholder="sk-..." class="w-full p-2 border rounded-lg text-sm">
                                <p class="text-xs text-gray-500 mt-1">Saved locally in your browser</p>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Embedding API Key</label>
                                <input type="password" id="embeddingApiKey" placeholder="Optional - uses OpenAI if empty" class="w-full p-2 border rounded-lg text-sm">
                                <p class="text-xs text-gray-500 mt-1">Leave empty to use OpenAI for both</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Start Ranking -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <div class="text-center">
                    <button id="startRankingBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all transform hover:scale-105">
                        <i class="fas fa-rocket mr-2"></i>Start Ranking Process
                    </button>
                    <p class="text-gray-600 mt-2">Ready to analyze your LinkedIn profiles with AI</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ranking Stage -->
    <div id="ranking" class="tab-content hidden">
        <div class="container mx-auto p-6 space-y-8">
            <!-- Ranking Configuration -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-chart-bar mr-3 text-blue-500"></i>Ranking Configuration
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Batch Configuration -->
                    <div class="batch-indicator rounded-lg p-4">
                        <h3 class="font-semibold mb-3">Batch Configuration</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between text-sm">
                                <span>Total Profiles:</span>
                                <span class="font-bold" id="totalProfilesCount">809</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Previously Ranked:</span>
                                <span class="font-bold text-green-600" id="rankedCount">0</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Remaining:</span>
                                <span class="font-bold text-blue-600" id="remainingCount">809</span>
                            </div>
                            
                            <div class="border-t pt-3 mt-4">
                                <label class="block text-sm font-medium mb-2">Current Batch Range</label>
                                <div class="flex space-x-2">
                                    <input type="number" id="batchStart" value="2" min="2" class="w-full p-2 border rounded text-center">
                                    <span class="p-2">to</span>
                                    <input type="number" id="batchEnd" value="51" min="2" class="w-full p-2 border rounded text-center">
                                </div>
                                <div class="mt-2">
                                    <label class="block text-sm font-medium mb-1">Batch Size</label>
                                    <select id="batchSize" class="w-full p-2 border rounded">
                                        <option value="20">20 profiles</option>
                                        <option value="50" selected>50 profiles</option>
                                        <option value="100">100 profiles</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ranking Options -->
                    <div>
                        <h3 class="font-semibold mb-3">Ranking Options</h3>
                        <div class="space-y-3">
                            <label class="flex items-center">
                                <input type="checkbox" id="skipRanked" class="mr-2" checked>
                                <span class="text-sm">Skip already ranked profiles</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="reRankWithFeedback" class="mr-2">
                                <span class="text-sm">Re-rank previous results with new feedback</span>
                            </label>
                            
                            <div class="mt-4 p-3 bg-yellow-50 rounded-lg">
                                <div class="flex items-start">
                                    <i class="fas fa-info-circle text-yellow-500 mr-2 mt-1"></i>
                                    <div class="text-sm text-yellow-700">
                                        <strong>Note:</strong> Results are cumulative. Each batch adds to your total results 
                                        and feedback improves all previous rankings.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Dashboard -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-tasks mr-3 text-green-500"></i>Ranking Progress
                </h2>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Overall Progress -->
                    <div class="text-center">
                        <h3 class="font-semibold mb-2">Session Progress</h3>
                        <div class="relative w-32 h-32 mx-auto mb-4">
                            <canvas id="overallProgressChart" width="128" height="128"></canvas>
                        </div>
                        <div class="text-sm text-gray-600">
                            <div><span id="sessionProgress">0</span>% Complete</div>
                            <div>(<span id="processedCount">0</span>/<span id="totalCount">809</span> profiles)</div>
                        </div>
                    </div>

                    <!-- Current Batch -->
                    <div class="text-center">
                        <h3 class="font-semibold mb-2">Current Batch</h3>
                        <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                            <div id="batchProgressBar" class="bg-blue-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="text-sm text-gray-600">
                            <div><span id="batchProgress">0</span>% Complete</div>
                            <div>(<span id="batchProcessed">0</span>/<span id="batchTotal">50</span> profiles)</div>
                        </div>
                    </div>

                    <!-- Estimated Time -->
                    <div class="text-center">
                        <h3 class="font-semibold mb-2">Estimates</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>ETA:</span>
                                <span id="estimatedTime" class="font-mono">~15 minutes</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Avg per profile:</span>
                                <span id="avgTime" class="font-mono">3.2s</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Processed:</span>
                                <span id="profilesPerSecond" class="font-mono">0.3/s</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Batch History -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-history mr-3 text-purple-500"></i>Batch History
                </h2>
                
                <div id="batchHistory" class="space-y-3">
                    <!-- Batch history items will be populated here -->
                </div>
            </div>

            <!-- Control Panel -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-play-circle mr-3 text-red-500"></i>Ranking Controls
                </h2>
                
                <div class="flex flex-wrap gap-4 justify-center">
                    <button id="startBatchBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-play mr-2"></i>Start Current Batch
                    </button>
                    <button id="pauseBatchBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors" disabled>
                        <i class="fas fa-pause mr-2"></i>Pause Batch
                    </button>
                    <button id="stopBatchBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors" disabled>
                        <i class="fas fa-stop mr-2"></i>Stop Batch
                    </button>
                    <button id="continueFromBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-forward mr-2"></i>Continue from row <span id="continueRow">52</span>
                    </button>
                </div>
            </div>

            <!-- Feedback Section -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-comment-dots mr-3 text-indigo-500"></i>Provide Feedback
                </h2>
                
                <div class="mb-4">
                    <textarea id="batchFeedback" placeholder="Provide feedback on the current batch results to improve future rankings..." class="w-full p-4 border rounded-lg text-sm" rows="4"></textarea>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Feedback Impact -->
                    <div id="feedbackImpact" class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold mb-2">Feedback Impact Preview</h4>
                        <div class="text-sm space-y-1">
                            <div class="flex justify-between">
                                <span>Technical Weight:</span>
                                <span><span class="line-through text-gray-400">85%</span> → <span class="text-green-600">70%</span></span>
                            </div>
                            <div class="flex justify-between">
                                <span>Experience Weight:</span>
                                <span><span class="line-through text-gray-400">60%</span> → <span class="text-green-600">80%</span></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Feedback Options -->
                    <div>
                        <h4 class="font-semibold mb-2">Apply Feedback To</h4>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="applyToPrevious" class="mr-2">
                                <span class="text-sm">Apply to previous rankings</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="applyToFuture" class="mr-2" checked>
                                <span class="text-sm">Apply to future rankings</span>
                            </label>
                        </div>
                        <button id="submitFeedbackBtn" class="mt-3 bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                            <i class="fas fa-paper-plane mr-2"></i>Submit Feedback
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Stage -->
    <div id="results" class="tab-content hidden">
        <div class="container mx-auto p-6 space-y-8">
            <!-- Results Summary -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-chart-pie mr-3 text-blue-500"></i>Results Summary
                </h2>
                
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-600" id="topCandidatesCount">23</div>
                        <div class="text-gray-600">TOP Candidates</div>
                        <div class="text-sm text-gray-500">(75-100 score)</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-600" id="goodCandidatesCount">45</div>
                        <div class="text-gray-600">GOOD Candidates</div>
                        <div class="text-sm text-gray-500">(60-74 score)</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-teal-600" id="hiddenGemsCount">8</div>
                        <div class="text-gray-600">Hidden Gems</div>
                        <div class="text-sm text-gray-500">(Special potential)</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-600" id="averageCandidatesCount">156</div>
                        <div class="text-gray-600">Other Candidates</div>
                        <div class="text-sm text-gray-500">(<60 score)</div>
                    </div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-download mr-3 text-purple-500"></i>Export Options
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Export Qualified Candidates -->
                    <div class="border-2 border-dashed border-purple-300 rounded-lg p-6 text-center">
                        <i class="fas fa-file-csv text-4xl text-purple-500 mb-4"></i>
                        <h3 class="font-semibold mb-2">Export Qualified Candidates</h3>
                        <p class="text-sm text-gray-600 mb-4">CSV file with candidates scoring ≥60</p>
                        <div class="text-sm text-gray-600 mb-4">
                            <div>✓ Include all original columns</div>
                            <div>✓ Add scoring breakdown</div>
                            <div>✓ Add strengths & concerns</div>
                            <div>✓ Add AI insights</div>
                        </div>
                        <div class="mb-4 p-2 bg-purple-50 rounded">
                            <span class="text-purple-700 font-semibold" id="qualifiedCount">68</span> candidates will be exported
                        </div>
                        <button id="exportQualifiedBtn" class="bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 transition-colors">
                            <i class="fas fa-download mr-2"></i>Download CSV
                        </button>
                    </div>

                    <!-- Export AI Insights -->
                    <div class="border-2 border-dashed border-green-300 rounded-lg p-6 text-center">
                        <i class="fas fa-brain text-4xl text-green-500 mb-4"></i>
                        <h3 class="font-semibold mb-2">Export Smart AI Insights</h3>
                        <p class="text-sm text-gray-600 mb-4">Comprehensive analysis report</p>
                        <div class="text-sm text-gray-600 mb-4">
                            <div>✓ Common Success Patterns</div>
                            <div>✓ Top Companies Analysis</div>
                            <div>✓ Recommended Searches</div>
                            <div>✓ Action Items List</div>
                        </div>
                        <div class="mb-4">
                            <select id="insightsFormat" class="p-2 border rounded">
                                <option value="pdf">PDF Report</option>
                                <option value="json">JSON Data</option>
                                <option value="both">Both Formats</option>
                            </select>
                        </div>
                        <button id="exportInsightsBtn" class="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 transition-colors">
                            <i class="fas fa-file-pdf mr-2"></i>Export Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- TOP Candidates -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-trophy mr-3 text-yellow-500"></i>TOP Candidates (75-100)
                </h2>
                
                <div class="grid lg:grid-cols-2 gap-6" id="topCandidates">
                    <!-- TOP Candidate 1 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="top-candidate p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Alex Semyzhonov</h3>
                                    <p class="text-sm opacity-90">Full Stack Developer at Inetex ltd.</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">87</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Information Technology & Services</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">92/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">85/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">88/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">84/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-green-700 text-sm mb-1">Strengths</h4>
                                <p class="text-xs text-gray-600">Excellent full-stack expertise with React, Node.js, Spring Boot. Strong leadership experience and startup founding background.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-red-700 text-sm mb-1">Concerns</h4>
                                <p class="text-xs text-gray-600">May need guidance on enterprise-scale architecture patterns.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/alex-semyzhonov" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600">Consider</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TOP Candidate 2 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="top-candidate p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Tomer Landesman</h3>
                                    <p class="text-sm opacity-90">Fullstack Software Engineer @ env0</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">91</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Computer Software</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">94/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">90/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">89/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">92/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-green-700 text-sm mb-1">Strengths</h4>
                                <p class="text-xs text-gray-600">Advanced IaC experience, AWS expertise, Technion CS degree. Military background shows discipline and leadership.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-red-700 text-sm mb-1">Concerns</h4>
                                <p class="text-xs text-gray-600">Highly qualified - may expect senior-level compensation and responsibilities.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/tomerlm" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600">Consider</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TOP Candidate 3 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="top-candidate p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Aviram Shubeili</h3>
                                    <p class="text-sm opacity-90">Software Engineer @ Philips</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">89</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Hospital & Health Care</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">91/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">88/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">87/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">90/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-green-700 text-sm mb-1">Strengths</h4>
                                <p class="text-xs text-gray-600">Technion CS graduate with high GPA, diverse tech stack (C#, Node.js, Python), strong documentation and collaboration skills.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-red-700 text-sm mb-1">Concerns</h4>
                                <p class="text-xs text-gray-600">Healthcare domain experience may need transition time to adjust to different industry requirements.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/aviram-shubeili" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600">Consider</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GOOD Candidates -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-thumbs-up mr-3 text-blue-500"></i>GOOD Candidates (60-74)
                </h2>
                
                <div class="grid lg:grid-cols-2 gap-6" id="goodCandidates">
                    <!-- GOOD Candidate 1 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="good-candidate p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Dror Reshef</h3>
                                    <p class="text-sm opacity-90">Full-stack Developer @ SuperCom</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">72</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Information Technology & Services</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">75/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">72/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">68/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">73/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-green-700 text-sm mb-1">Strengths</h4>
                                <p class="text-xs text-gray-600">Strong C# and React skills, SignalR experience, graduated with excellence from Tel Aviv University.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-red-700 text-sm mb-1">Concerns</h4>
                                <p class="text-xs text-gray-600">Limited experience with modern cloud architectures and DevOps practices.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/dror-reshef-1a9533a" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600">Consider</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GOOD Candidate 2 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="good-candidate p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Vakho Baratashvili</h3>
                                    <p class="text-sm opacity-90">Senior Software Engineer @ VFR</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">69</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Marketing & Advertising</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">73/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">67/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">71/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">65/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-green-700 text-sm mb-1">Strengths</h4>
                                <p class="text-xs text-gray-600">Game development experience, diverse tech stack including Python, C#, Node.js. AWS and PostgreSQL expertise.</p>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-red-700 text-sm mb-1">Concerns</h4>
                                <p class="text-xs text-gray-600">Game development background may require adjustment to business application development patterns.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/vakho-baratashvili-05895b55" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600">Consider</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hidden Gems -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-gem mr-3 text-teal-500"></i>Hidden Gems
                </h2>
                
                <div class="grid lg:grid-cols-2 gap-6">
                    <!-- Hidden Gem 1 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="hidden-gem p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Leon Kannanovich</h3>
                                    <p class="text-sm opacity-90">Full Stack Developer @ Sapiens Decision</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">58</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Computer Software</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">82/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">75/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">45/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">78/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4 p-3 bg-teal-50 rounded-lg">
                                <h4 class="font-semibold text-teal-800 text-sm mb-1">Why This is a Hidden Gem</h4>
                                <p class="text-xs text-teal-700">Exceptional technical skills (82/100) and startup readiness (78/100) despite lower overall score. Ben-Gurion CS degree and military background suggest strong potential for rapid growth.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/leon-kannanovich-414a64120" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-teal-500 text-white px-3 py-1 rounded text-xs hover:bg-teal-600">Consider for Outreach</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Dismiss</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hidden Gem 2 -->
                    <div class="border rounded-lg overflow-hidden">
                        <div class="hidden-gem p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg">Stav A.</h3>
                                    <p class="text-sm opacity-90">Full Stack Developer @ ControlUp</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold">55</div>
                                    <div class="text-xs opacity-90">Overall Score</div>
                                </div>
                            </div>
                            <div class="text-xs opacity-90">Computer Software</div>
                        </div>
                        
                        <div class="p-4">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <div class="text-xs text-gray-500">Technical Skills</div>
                                    <div class="font-semibold text-blue-600">79/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Cultural Fit</div>
                                    <div class="font-semibold text-green-600">72/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Experience</div>
                                    <div class="font-semibold text-purple-600">38/100</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Startup Ready</div>
                                    <div class="font-semibold text-orange-600">81/100</div>
                                </div>
                            </div>
                            
                            <div class="mb-4 p-3 bg-teal-50 rounded-lg">
                                <h4 class="font-semibold text-teal-800 text-sm mb-1">Why This is a Hidden Gem</h4>
                                <p class="text-xs text-teal-700">Outstanding startup readiness (81/100) and solid technical foundation (79/100). Modern tech stack with React, TypeScript, Node.js. International experience (Japan) shows adaptability.</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <a href="https://linkedin.com/in/stavab" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-1"></i>View Profile
                                </a>
                                <div class="space-x-2">
                                    <button class="bg-teal-500 text-white px-3 py-1 rounded text-xs hover:bg-teal-600">Consider for Outreach</button>
                                    <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600">Dismiss</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Candidates -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-list mr-3 text-gray-500"></i>Other Candidates (<60)
                </h2>
                
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 border rounded-lg">
                        <div>
                            <h4 class="font-semibold">Luba Epshtein</h4>
                            <p class="text-sm text-gray-600">Full stack developer @ bolt - Score: 52</p>
                            <p class="text-xs text-gray-500">Reason: Limited experience with modern frameworks</p>
                        </div>
                        <a href="https://linkedin.com/in/luba-epshtein-2aa0bb164" target="_blank" class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 border rounded-lg">
                        <div>
                            <h4 class="font-semibold">Mor Tabib</h4>
                            <p class="text-sm text-gray-600">Full Stack Developer @ Outseer - Score: 48</p>
                            <p class="text-xs text-gray-500">Reason: Technology stack mismatch</p>
                        </div>
                        <a href="https://linkedin.com/in/morbokobza" target="_blank" class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 border rounded-lg">
                        <div>
                            <h4 class="font-semibold">Shir Engel</h4>
                            <p class="text-sm text-gray-600">Full Stack Developer @ ZoomInfo - Score: 45</p>
                            <p class="text-xs text-gray-500">Reason: Junior level experience</p>
                        </div>
                        <a href="https://linkedin.com/in/shir-engel" target="_blank" class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button class="text-blue-500 hover:text-blue-600 text-sm">
                            <i class="fas fa-chevron-down mr-1"></i>Show 153 more candidates
                        </button>
                    </div>
                </div>
            </div>

            <!-- Insufficient Data -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-exclamation-triangle mr-3 text-yellow-500"></i>Profiles with Insufficient Data
                </h2>
                
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 border rounded-lg bg-yellow-50">
                        <div>
                            <h4 class="font-semibold">Tal Yohay</h4>
                            <p class="text-sm text-gray-600">Full Stack Developer @ Nipendo</p>
                            <p class="text-xs text-yellow-600">Missing: Detailed job descriptions and skills breakdown</p>
                        </div>
                        <a href="https://linkedin.com/in/tal-yohay" target="_blank" class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 border rounded-lg bg-yellow-50">
                        <div>
                            <h4 class="font-semibold">Tal Moran</h4>
                            <p class="text-sm text-gray-600">Senior Fullstack Engineer @ T-REX</p>
                            <p class="text-xs text-yellow-600">Missing: Education and technical skills details</p>
                        </div>
                        <a href="https://linkedin.com/in/tal-moran-b9246338" target="_blank" class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button class="text-yellow-600 hover:text-yellow-700 text-sm">
                            <i class="fas fa-chevron-down mr-1"></i>Show 4 more profiles
                        </button>
                    </div>
                </div>
            </div>

            <!-- Smart AI Insights -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fas fa-lightbulb mr-3 text-yellow-500"></i>Smart AI Engine Insights
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Common Patterns -->
                    <div class="insight-card p-4 bg-gray-50 rounded-lg">
                        <h3 class="font-semibold mb-3 flex items-center">
                            <i class="fas fa-search mr-2 text-blue-500"></i>Common Success Patterns
                        </h3>
                        <ul class="text-sm space-y-2">
                            <li>• <strong>85%</strong> of TOP candidates have Technion/Tel Aviv University degrees</li>
                            <li>• <strong>92%</strong> have experience with React + Node.js combination</li>
                            <li>• <strong>78%</strong> have military service background (Unit 8200, IDF)</li>
                            <li>• <strong>67%</strong> have worked at companies with 100+ employees</li>
                            <li>• <strong>89%</strong> show evidence of rapid career progression</li>
                        </ul>
                    </div>

                    <!-- Top Companies -->
                    <div class="insight-card p-4 bg-gray-50 rounded-lg">
                        <h3 class="font-semibold mb-3 flex items-center">
                            <i class="fas fa-building mr-2 text-green-500"></i>Top Companies Analysis
                        </h3>
                        <div class="text-sm space-y-2">
                            <div class="flex justify-between">
                                <span>Technion graduates:</span>
                                <span class="font-semibold">12 candidates</span>
                            </div>
                            <div class="flex justify-between">
                                <span>EPAM Systems alumni:</span>
                                <span class="font-semibold">8 candidates</span>
                            </div>
                            <div class="flex justify-between">
                                <span>IDF/Unit 8200 veterans:</span>
                                <span class="font-semibold">15 candidates</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Tel Aviv University:</span>
                                <span class="font-semibold">9 candidates</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Searches -->
                    <div class="insight-card p-4 bg-gray-50 rounded-lg">
                        <h3 class="font-semibold mb-3 flex items-center">
                            <i class="fas fa-compass mr-2 text-purple-500"></i>Recommended Searches
                        </h3>
                        <ul class="text-sm space-y-2">
                            <li>• "Senior Full Stack developers from Wix"</li>
                            <li>• "React developers with Unit 8200 background"</li>
                            <li>• "Technion CS graduates in Tel Aviv area"</li>
                            <li>• "Node.js experts from Series B startups"</li>
                            <li>• "DevOps engineers with AWS certification"</li>
                        </ul>
                    </div>

                    <!-- Action Items -->
                    <div class="insight-card p-4 bg-gray-50 rounded-lg">
                        <h3 class="font-semibold mb-3 flex items-center">
                            <i class="fas fa-tasks mr-2 text-red-500"></i>Action Items
                        </h3>
                        <ul class="text-sm space-y-2">
                            <li>• <strong>Immediate:</strong> Reach out to 23 TOP candidates</li>
                            <li>• <strong>This week:</strong> Schedule interviews with Hidden Gems</li>
                            <li>• <strong>Next:</strong> Source more candidates from EPAM, Wix</li>
                            <li>• <strong>Consider:</strong> Lowering experience requirements</li>
                            <li>• <strong>Focus:</strong> Prioritize candidates with startup experience</li>
                        </ul>
                    </div>
                </div>

                <!-- Career Trajectory Analysis -->
                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-semibold mb-3 flex items-center">
                        <i class="fas fa-chart-line mr-2 text-blue-600"></i>Career Trajectory Analysis
                    </h3>
                    <div class="grid md:grid-cols-3 gap-4 text-sm">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">2.3 years</div>
                            <div class="text-gray-600">Average promotion cycle</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">78%</div>
                            <div class="text-gray-600">Job stability (2+ years)</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">45%</div>
                            <div class="text-gray-600">Have leadership experience</div>
                        </div>
                    </div>
                </div>

                <!-- Explainable AI Radar Chart -->
                <div class="mt-6">
                    <h3 class="font-semibold mb-3 flex items-center">
                        <i class="fas fa-chart-radar mr-2 text-indigo-600"></i>Ranking Factor Weights
                    </h3>
                    <div class="radar-chart bg-gray-50 rounded-lg p-4">
                        <canvas id="radarChart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        window.scorelySessions = {};
        let currentSessionId = 'default';
        
        // Initialize session
        function initializeSession() {
            if (!window.scorelySessions[currentSessionId]) {
                window.scorelySessions[currentSessionId] = {
                    setup: {},
                    ranking: {
                        batches: [],
                        currentBatch: 0,
                        totalProcessed: 0,
                        feedback: []
                    },
                    results: {
                        candidates: [],
                        insights: {}
                    }
                };
            }
        }

        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const targetTab = btn.dataset.tab;
                
                // Update tab buttons
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('tab-active');
                    b.classList.add('text-gray-500');
                });
                btn.classList.add('tab-active');
                btn.classList.remove('text-gray-500');
                
                // Show/hide content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(targetTab).classList.remove('hidden');
            });
        });

        // File upload handlers
        document.getElementById('mainCsv').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('mainCsvStatus').innerHTML = `
                    <div class="text-green-600 text-sm">
                        <i class="fas fa-check mr-1"></i>${file.name} uploaded
                    </div>
                `;
                document.getElementById('fileProcessingSummary').classList.remove('hidden');
                
                // Simulate file processing
                setTimeout(() => {
                    document.getElementById('totalRows').textContent = '847';
                    document.getElementById('blacklistedRows').textContent = '23';
                    document.getElementById('inProcessRows').textContent = '15';
                    document.getElementById('availableRows').textContent = '809';
                }, 1000);
            }
        });

        // Ideal profile PDF handlers
        document.getElementById('idealPdf1').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('idealPdf1Status').innerHTML = `
                    <div class="text-green-600 text-sm">
                        <i class="fas fa-check mr-1"></i>${file.name} uploaded
                    </div>
                `;
            }
        });

        document.getElementById('idealPdf2').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('idealPdf2Status').innerHTML = `
                    <div class="text-green-600 text-sm">
                        <i class="fas fa-check mr-1"></i>${file.name} uploaded
                    </div>
                `;
            }
        });

        // Job description PDF handler
        document.getElementById('jobDescPdf').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('jobDescPdfStatus').innerHTML = `
                    <div class="text-green-600 text-sm">
                        <i class="fas fa-check mr-1"></i>${file.name} uploaded
                    </div>
                `;
            }
        });

        // Batch size change handler
        document.getElementById('batchSize').addEventListener('change', function(e) {
            const batchSize = parseInt(e.target.value);
            const currentStart = parseInt(document.getElementById('batchStart').value);
            document.getElementById('batchEnd').value = currentStart + batchSize - 1;
        });

        // Start ranking button
        document.getElementById('startRankingBtn').addEventListener('click', function() {
            // Switch to ranking tab
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('tab-active');
                b.classList.add('text-gray-500');
            });
            document.querySelector('[data-tab="ranking"]').classList.add('tab-active');
            document.querySelector('[data-tab="ranking"]').classList.remove('text-gray-500');
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById('ranking').classList.remove('hidden');
        });

        // Ranking control buttons
        document.getElementById('startBatchBtn').addEventListener('click', function() {
            this.disabled = true;
            document.getElementById('pauseBatchBtn').disabled = false;
            document.getElementById('stopBatchBtn').disabled = false;
            
            // Simulate batch processing
            simulateBatchProcessing();
        });

        document.getElementById('pauseBatchBtn').addEventListener('click', function() {
            this.disabled = true;
            document.getElementById('startBatchBtn').disabled = false;
        });

        document.getElementById('stopBatchBtn').addEventListener('click', function() {
            this.disabled = true;
            document.getElementById('pauseBatchBtn').disabled = true;
            document.getElementById('startBatchBtn').disabled = false;
        });

        // Export buttons
        document.getElementById('exportQualifiedBtn').addEventListener('click', function() {
            // Create mock CSV data
            const csvData = `Name,Company,Score,Technical,Cultural,Experience,Startup,Strengths,Concerns
Alex Semyzhonov,Inetex ltd.,87,92,85,88,84,"Excellent full-stack expertise","May need enterprise guidance"
Tomer Landesman,env0,91,94,90,89,92,"Advanced IaC experience","May expect senior compensation"
Aviram Shubeili,Philips,89,91,88,87,90,"Technion CS graduate","Healthcare domain transition"`;
            
            const blob = new Blob([csvData], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `scorely_qualified_candidates_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        });

        document.getElementById('exportInsightsBtn').addEventListener('click', function() {
            const insights = {
                common_patterns: {
                    technion_graduates: "85%",
                    react_nodejs_experience: "92%",
                    military_background: "78%",
                    large_company_experience: "67%",
                    rapid_progression: "89%"
                },
                top_companies: {
                    technion: 12,
                    epam: 8,
                    idf_8200: 15,
                    tel_aviv_university: 9
                },
                recommended_searches: [
                    "Senior Full Stack developers from Wix",
                    "React developers with Unit 8200 background",
                    "Technion CS graduates in Tel Aviv area",
                    "Node.js experts from Series B startups",
                    "DevOps engineers with AWS certification"
                ],
                action_items: [
                    "Reach out to 23 TOP candidates",
                    "Schedule interviews with Hidden Gems",
                    "Source more candidates from EPAM, Wix",
                    "Consider lowering experience requirements",
                    "Prioritize candidates with startup experience"
                ]
            };
            
            const format = document.getElementById('insightsFormat').value;
            if (format === 'json' || format === 'both') {
                const blob = new Blob([JSON.stringify(insights, null, 2)], { type: 'application/json' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `scorely_ai_insights_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                window.URL.revokeObjectURL(url);
            }
            
            if (format === 'pdf' || format === 'both') {
                alert('PDF export functionality would integrate with a PDF generation library in production.');
            }
        });

        // Simulate batch processing
        function simulateBatchProcessing() {
            let progress = 0;
            const total = 50;
            
            const interval = setInterval(() => {
                progress += Math.random() * 3;
                if (progress > total) progress = total;
                
                const percentage = Math.round((progress / total) * 100);
                document.getElementById('batchProgressBar').style.width = percentage + '%';
                document.getElementById('batchProgress').textContent = percentage;
                document.getElementById('batchProcessed').textContent = Math.round(progress);
                
                // Update session progress
                const sessionProgress = Math.round((progress / 809) * 100);
                document.getElementById('sessionProgress').textContent = sessionProgress;
                document.getElementById('processedCount').textContent = Math.round(progress);
                
                if (progress >= total) {
                    clearInterval(interval);
                    document.getElementById('startBatchBtn').disabled = false;
                    document.getElementById('pauseBatchBtn').disabled = true;
                    document.getElementById('stopBatchBtn').disabled = true;
                    
                    // Add batch to history
                    addBatchToHistory(1, 2, 51, 5, 12);
                    
                    // Switch to results after completion
                    setTimeout(() => {
                        document.querySelectorAll('.tab-btn').forEach(b => {
                            b.classList.remove('tab-active');
                            b.classList.add('text-gray-500');
                        });
                        document.querySelector('[data-tab="results"]').classList.add('tab-active');
                        document.querySelector('[data-tab="results"]').classList.remove('text-gray-500');
                        
                        document.querySelectorAll('.tab-content').forEach(content => {
                            content.classList.add('hidden');
                        });
                        document.getElementById('results').classList.remove('hidden');
                    }, 1000);
                }
            }, 200);
        }

        // Add batch to history
        function addBatchToHistory(batchNum, start, end, topCount, goodCount) {
            const historyDiv = document.getElementById('batchHistory');
            const batchItem = document.createElement('div');
            batchItem.className = 'flex justify-between items-center p-3 border rounded-lg bg-green-50';
            batchItem.innerHTML = `
                <div>
                    <span class="font-semibold">Batch ${batchNum} (${start}-${end})</span>
                    <span class="text-green-600 ml-2"><i class="fas fa-check mr-1"></i>Completed</span>
                </div>
                <div class="text-sm text-gray-600">
                    ${topCount} TOP, ${goodCount} GOOD
                </div>
            `;
            historyDiv.appendChild(batchItem);
        }

        // Initialize radar chart
        function initializeRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Technical Skills', 'Cultural Fit', 'Experience Level', 'Startup Readiness', 'Leadership', 'Education'],
                    datasets: [{
                        label: 'Current Weights',
                        data: [85, 75, 90, 80, 65, 55],
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // Initialize progress chart
        function initializeProgressChart() {
            const ctx = document.getElementById('overallProgressChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: ['#4CAF50', '#E0E0E0'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Reset session
        document.getElementById('resetBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset the current session? All progress will be lost.')) {
                window.scorelySessions[currentSessionId] = {};
                location.reload();
            }
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeSession();
            
            // Initialize charts when results tab is first shown
            document.querySelector('[data-tab="results"]').addEventListener('click', function() {
                setTimeout(() => {
                    if (document.getElementById('radarChart')) {
                        initializeRadarChart();
                    }
                }, 100);
            });
            
            // Initialize progress chart when ranking tab is shown
            document.querySelector('[data-tab="ranking"]').addEventListener('click', function() {
                setTimeout(() => {
                    if (document.getElementById('overallProgressChart')) {
                        initializeProgressChart();
                    }
                }, 100);
            });
        });

        // Save API keys to localStorage
        document.getElementById('gptApiKey').addEventListener('change', function(e) {
            localStorage.setItem('scorely_gpt_api_key', e.target.value);
        });

        document.getElementById('embeddingApiKey').addEventListener('change', function(e) {
            localStorage.setItem('scorely_embedding_api_key', e.target.value);
        });

        // Load saved API keys
        document.addEventListener('DOMContentLoaded', function() {
            const savedGptKey = localStorage.getItem('scorely_gpt_api_key');
            const savedEmbeddingKey = localStorage.getItem('scorely_embedding_api_key');
            
            if (savedGptKey) {
                document.getElementById('gptApiKey').value = savedGptKey;
            }
            if (savedEmbeddingKey) {
                document.getElementById('embeddingApiKey').value = savedEmbeddingKey;
            }
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDs%2FUMhjI%2BFCX6mfSTs6sSWQaGzptH50zEomEjGeS17qjbnmW8IZKiDshgIfavNxAif5S1PuPo8wBnm3944BBvhP2cNL3aqhCc0ra61g0f2RiqeHskRb3ZBpALt2rhuhIFZzCITXvzXtm8rlwaSwdRRy0Zcf8G9uOy1tobFJTFMvOxiLRAhWm4YX%2Fcvt1uqDhah6%2FR8AoU%2Fy%2Fcxg6LtHtwtJJFlGfCeJzUHbqeBn%2FrDopVmayMhkzTu5%2Bhvsc8LOq6CC9CJ%2BgvH0lQLoTUSNl%2FYZZsoicwwTLnDtYRle%2BGxq54U%2F5z0sJaXcNO779j1Ng3Tq8AGk9SKJC2xp7lyuKrhgL5RjM%2FzQf0oWLoz%2Bsyqn9GFMYfrYGYqaxhVO6IyldqCwdCcSLl8XnR6BpEGU94P3itjq4nUYUKpDBAgkeNe16OxQ9HHeZVSz5YTnBoqa4%2BVFFYBNXbd7aHrlEVV%2Fvc%2BNQVU7AGIIqOnxjM%2B9kvROOSijXOxEOpRpp2CX8h3Qw1AfVOT9FiOSAPVaA%2F4QUFSs%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDs/UMhjI+FCX6mfSTs6sSWQaGzptH50zEomEjGeS17qjbnmW8IZKiDshgIfavNxAif5S1PuPo8wBnm3944BBvhP2cNL3aqhCc0ra61g0f2RiqeHskRb3ZBpALt2rhuhIFZzCITXvzXtm8rlwaSwdRRy0Zcf8G9uOy1tobFJTFMvOxiLRAhWm4YX/cvt1uqDhah6/R8AoU/y/cxg6LtHtwtJJFlGfCeJzUHbqeBn/rDopVmayMhkzTu5+hvsc8LOq6CC9CJ+gvH0lQLoTUSNl/YZZsoicwwTLnDtYRle+Gxq54U/5z0sJaXcNO779j1Ng3Tq8AGk9SKJC2xp7lyuKrhgL5RjM/zQf0oWLoz+syqn9GFMYfrYGYqaxhVO6IyldqCwdCcSLl8XnR6BpEGU94P3itjq4nUYUKpDBAgkeNe16OxQ9HHeZVSz5YTnBoqa4+VFFYBNXbd7aHrlEVV/vc+NQVU7AGIIqOnxjM+9kvROOSijXOxEOpRpp2CX8h3Qw1AfVOT9FiOSAPVaA/4QUFSs=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
