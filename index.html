<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scorely Beta - LinkedIn Profile Ranker</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #f8fafc;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--white);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--white);
        }

        /* Navigation */
        .navbar {
            background: var(--white);
            border-bottom: 2px solid var(--border-color);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-brand {
            margin-bottom: 1rem;
        }

        .nav-brand h1 {
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .nav-brand p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--border-color);
            background: var(--white);
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .tab-btn.active {
            background: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }

        .reset-btn {
            margin-left: auto;
            background: var(--error-color) !important;
            color: var(--white) !important;
            border-color: var(--error-color) !important;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .tab-content.active {
            display: block;
        }

        /* Sections */
        .section {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: var(--text-primary);
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h3 {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
        }
        /* Form Elements */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            background: var(--gray-50);
            transition: all 0.2s;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: var(--gray-100);
        }

        .upload-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .upload-icon {
            font-size: 2rem;
            color: var(--text-secondary);
        }

        .upload-area p {
            color: var(--text-primary);
            font-weight: 500;
        }

        .upload-area small {
            color: var(--text-secondary);
        }

        /* Input Styles */
        input[type="text"], 
        input[type="email"], 
        textarea, 
        select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.9rem;
            background: var(--white);
            transition: border-color 0.2s;
        }

        input:focus, 
        textarea:focus, 
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.9rem;
        }

        /* Filter Grid */
        .filter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .filter-item {
            display: flex;
            flex-direction: column;
        }

        /* Checkbox Grid */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .checkbox-grid label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .checkbox-grid label:hover {
            background: var(--gray-50);
        }

        input[type="checkbox"], 
        input[type="radio"] {
            width: auto;
            margin: 0;
        }

        /* Ideal Profiles */
        .ideal-profiles {
            display: grid;
            gap: 1.5rem;
        }

        .profile-input {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            background: var(--gray-50);
        }

        .input-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .input-options label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: 400;
        }

        /* Model Selection */
        .model-selection {
            display: grid;
            gap: 0.75rem;
        }

        .model-selection label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--white);
        }

        .model-selection label:hover {
            border-color: var(--primary-color);
            background: var(--gray-50);
        }

        .model-selection input:checked + label,
        .model-selection label:has(input:checked) {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        /* Buttons */
        .btn-primary, .btn-secondary {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary-color);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        /* Ranking Progress */
        .ranking-progress {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .progress-info {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .batch-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .batch-info p {
            background: var(--gray-50);
            padding: 0.75rem;
            border-radius: 6px;
            margin: 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--gray-200);
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            transition: width 0.3s ease;
            border-radius: 6px;
        }

        .ranking-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .feedback-section {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        /* Results */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .export-section {
            display: flex;
            gap: 1rem;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .summary-card h3 {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .summary-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }

        .summary-card p {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Candidate Cards */
        .candidate-card {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .candidate-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .candidate-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .candidate-info h3 {
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .candidate-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .candidate-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-top {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: var(--white);
        }

        .badge-good {
            background: var(--primary-color);
            color: var(--white);
        }

        .badge-hidden {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: var(--white);
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
            margin: 1rem 0;
        }

        .score-item {
            background: var(--gray-50);
            padding: 0.75rem;
            border-radius: 6px;
            text-align: center;
        }

        .score-item .label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .score-item .value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .strengths-concerns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .strengths, .concerns {
            padding: 1rem;
            border-radius: 8px;
        }

        .strengths {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid var(--success-color);
        }

        .concerns {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--error-color);
        }

        .strengths h4, .concerns h4 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .strengths h4 {
            color: var(--success-color);
        }

        .concerns h4 {
            color: var(--error-color);
        }

        .strengths ul, .concerns ul {
            list-style: none;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .strengths li::before {
            content: "✓ ";
            color: var(--success-color);
            font-weight: 600;
        }

        .concerns li::before {
            content: "⚠ ";
            color: var(--error-color);
            font-weight: 600;
        }

        .ai-insights {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .ai-insights h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-insights p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .candidate-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background: var(--white);
            color: var(--text-primary);
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }

        .action-btn:hover {
            background: var(--gray-50);
            border-color: var(--primary-color);
        }

        .action-btn.primary {
            background: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }

        /* Smart AI Insights Panel */
        .ai-insights-panel {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .insights-grid {
            display: grid;
            gap: 1.5rem;
        }

        .insight-section {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1.5rem;
        }

        .insight-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .insight-section h3 {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-list {
            list-style: none;
            display: grid;
            gap: 0.5rem;
        }

        .insight-list li {
            padding: 0.75rem;
            background: var(--gray-50);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0;
            }

            .navbar {
                padding: 1rem;
            }

            .nav-tabs {
                flex-wrap: wrap;
            }

            .tab-content {
                padding: 1rem;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .batch-info {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                align-items: stretch;
            }

            .export-section {
                justify-content: center;
            }

            .results-summary {
                grid-template-columns: 1fr;
            }

            .scores-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .strengths-concerns {
                grid-template-columns: 1fr;
            }

            .candidate-actions {
                flex-wrap: wrap;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: var(--white);
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 1000;
        }

        .tooltip:hover::after {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>🎯 Scorely Beta</h1>
                <p>LinkedIn Profile Ranker</p>
            </div>
            <div class="nav-tabs">
                <button class="tab-btn active" data-tab="setup">📋 Setup</button>
                <button class="tab-btn" data-tab="ranking">⚡ Ranking</button>
                <button class="tab-btn" data-tab="results">📊 Results</button>
                <button class="tab-btn reset-btn" onclick="resetSession()">🔄 Reset</button>
            </div>
        </nav>
        <!-- Setup Tab -->
        <div id="setup" class="tab-content active">
            <!-- API Configuration -->
            <div class="section">
                <h2>🔑 API Configuration</h2>
                <div class="filter-grid">
                    <div class="filter-item">
                        <label for="embeddingApiKey">Embedding API Key:</label>
                        <input type="password" id="embeddingApiKey" placeholder="Optional - uses OpenAI if empty">
                        <small style="color: var(--text-secondary); margin-top: 0.5rem;">Leave empty to use OpenAI for both</small>
                    </div>
                    <div class="filter-item">
                        <label for="gptApiKey">GPT API Key:</label>
                        <input type="password" id="gptApiKey" placeholder="sk-...">
                        <small style="color: var(--text-secondary); margin-top: 0.5rem;">Required for AI-powered ranking</small>
                    </div>
                </div>
            </div>

            <!-- File Upload -->
            <div class="section">
                <h2>📁 File Upload</h2>
                <div class="upload-area" onclick="document.getElementById('csvFile').click()">
                    <input type="file" id="csvFile" accept=".csv" style="display: none;">
                    <div class="upload-box">
                        <div class="upload-icon">📄</div>
                        <p>Click to upload CSV file</p>
                        <small>LinkedIn profiles data</small>
                    </div>
                </div>
                <div id="fileInfo" style="margin-top: 1rem; display: none;">
                    <p><strong>File:</strong> <span id="fileName"></span></p>
                    <p><strong>Size:</strong> <span id="fileSize"></span></p>
                    <p><strong>Rows:</strong> <span id="fileRows"></span> (starting from row 2)</p>
                </div>
            </div>

            <!-- Blacklist & Filters -->
            <div class="section">
                <h2>🚫 Blacklist & Filters</h2>
                <div class="filter-grid">
                    <div class="filter-item">
                        <label>Blacklist Companies:</label>
                        <textarea id="blacklistCompanies" placeholder="Company1, Company2, Company3..." rows="3"></textarea>
                        <small style="color: var(--text-secondary);">Comma-separated company names to exclude</small>
                    </div>
                    <div class="filter-item">
                        <label>Already in Process:</label>
                        <textarea id="inProcessCandidates" placeholder="Profile IDs or names..." rows="3"></textarea>
                        <small style="color: var(--text-secondary);">Candidates currently being processed</small>
                    </div>
                </div>
            </div>

            <!-- Ideal Candidate Profiles -->
            <div class="section">
                <h2>👤 Ideal Candidate Profiles</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                    💡 Help our AI understand your ideal candidates by providing examples
                </p>
                <div class="ideal-profiles">
                    <div class="profile-input">
                        <h3>Ideal Profile #1:</h3>
                        <div class="input-options">
                            <label>
                                <input type="radio" name="profile1" value="pdf" id="p1-pdf">
                                📄 Upload PDF
                            </label>
                            <label>
                                <input type="radio" name="profile1" value="text" id="p1-text" checked>
                                📝 Copy & Paste Profile
                            </label>
                        </div>
                        <input type="file" id="profile1File" accept=".pdf" style="display: none;">
                        <textarea id="profile1Text" placeholder="Paste LinkedIn profile (Ctrl+A from LinkedIn)..." rows="4"></textarea>
                        <small style="color: var(--text-secondary);">
                            💡 Tip: This profile will be used as a benchmark for technical excellence
                        </small>
                    </div>
                    
                    <div class="profile-input">
                        <h3>Ideal Profile #2:</h3>
                        <div class="input-options">
                            <label>
                                <input type="radio" name="profile2" value="pdf" id="p2-pdf">
                                📄 Upload PDF
                            </label>
                            <label>
                                <input type="radio" name="profile2" value="text" id="p2-text" checked>
                                📝 Copy & Paste Profile
                            </label>
                        </div>
                        <input type="file" id="profile2File" accept=".pdf" style="display: none;">
                        <textarea id="profile2Text" placeholder="Paste LinkedIn profile (Ctrl+A from LinkedIn)..." rows="4"></textarea>
                        <small style="color: var(--text-secondary);">
                            💡 Tip: This profile will be used as a benchmark for cultural fit
                        </small>
                    </div>
                </div>
            </div>

            <!-- Job Description -->
            <div class="section">
                <h2>💼 Job Description</h2>
                <textarea id="jobDesc" placeholder="Describe the position, required skills, ideal candidate profile, company culture, and any specific requirements..." rows="6"></textarea>
                <small style="color: var(--text-secondary);">
                    Be as detailed as possible - this helps the AI understand what you're looking for
                </small>
            </div>

            <!-- Excellence Indicators -->
            <div class="section">
                <h2>🏆 Excellence Indicators</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    💡 Tip: Our AI will look for keywords indicating these excellence factors in profiles. 
                    For example: "graduated summa cum laude", "promoted to lead in 6 months", "recognized with award"
                </p>
                <div class="checkbox-grid">
                    <label class="tooltip" data-tooltip="Academic honors, dean's list, magna/summa cum laude">
                        <input type="checkbox" id="academic-excellence">
                        🎓 Graduated with honors/distinction
                    </label>
                    <label class="tooltip" data-tooltip="Industry recognition, professional awards, certifications">
                        <input type="checkbox" id="industry-awards">
                        🏅 Industry awards/recognition
                    </label>
                    <label class="tooltip" data-tooltip="Special forces, intelligence units, technology units">
                        <input type="checkbox" id="military-elite">
                        🪖 Elite military unit experience
                    </label>
                    <label class="tooltip" data-tooltip="Led major initiatives, launched products, drove significant impact">
                        <input type="checkbox" id="high-impact">
                        🚀 High-impact projects
                    </label>
                    <label class="tooltip" data-tooltip="Fast promotions, quick career progression, leadership roles">
                        <input type="checkbox" id="rapid-advancement">
                        📈 Rapid career advancement
                    </label>
                    <label class="tooltip" data-tooltip="Research papers, patents, technical publications">
                        <input type="checkbox" id="publications">
                        📚 Publications/Patents
                    </label>
                </div>
            </div>

            <!-- Additional Filters -->
            <div class="section">
                <h2>🎯 Additional Filters</h2>
                <div class="filter-grid">
                    <div class="filter-item">
                        <label>Education Level:</label>
                        <select id="educationLevel">
                            <option value="">Any Education Level</option>
                            <option value="high-school">High School</option>
                            <option value="associate">Associate Degree</option>
                            <option value="bachelor">Bachelor's Degree</option>
                            <option value="master">Master's Degree</option>
                            <option value="phd">PhD/Doctorate</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>Location:</label>
                        <input type="text" id="location" placeholder="e.g. Tel Aviv, Remote, etc.">
                    </div>
                </div>
            </div>

            <!-- Leadership Experience -->
            <div class="section">
                <h2>👥 Leadership Experience</h2>
                <div class="checkbox-grid">
                    <label>
                        <input type="checkbox" id="team-lead">
                        👥 Team Lead
                    </label>
                    <label>
                        <input type="checkbox" id="manager">
                        👔 Manager
                    </label>
                    <label>
                        <input type="checkbox" id="executive">
                        🎯 Executive (VP/C-level)
                    </label>
                </div>
            </div>

            <!-- Key Achievements -->
            <div class="section">
                <h2>🔑 Key Achievements (Keywords)</h2>
                <textarea id="keyAchievements" placeholder="e.g. scaled, launched, improved, reduced costs by 40%, increased revenue, led architecture redesign, implemented CI/CD, grew team by 200%..." rows="3"></textarea>
                <small style="color: var(--text-secondary);">
                    📝 Examples: grew team by 200%, increased revenue, reduced costs by 40%, launched product, led architecture redesign, implemented CI/CD, scaled...
                </small>
                <br><br>
                <label>Additional Keywords:</label>
                <textarea id="additionalKeywords" placeholder="Any other important keywords..." rows="2"></textarea>
                <small style="color: var(--text-secondary);">
                    Other specific terms to prioritize in candidate ranking
                </small>
            </div>

            <!-- AI Ranking Enhancement -->
            <div class="section">
                <h2>🤖 AI Ranking Enhancement</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    🧠 AI Understanding: Our model will analyze profiles for indicators of excellence like rapid promotions, 
                    significant achievements, and recognition, even if not explicitly mentioned in keywords.
                </p>
                <label>Provide specific instructions to improve the AI's ranking accuracy for your needs:</label>
                <textarea id="aiInstructions" placeholder='Example: "Prioritize candidates who have worked with large-scale systems" or "Look for evidence of leadership in cross-functional teams"' rows="4"></textarea>
                
                <div style="margin-top: 1rem;">
                    <label>Focus Areas:</label>
                    <div class="filter-grid" style="margin-top: 0.5rem;">
                        <div style="display: flex; gap: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="radio" name="focus" value="innovation">
                                💡 Innovation focus
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="radio" name="focus" value="initiative">
                                🎯 Initiative focus
                            </label>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="radio" name="focus" value="top-company">
                                🏢 Top company focus
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="radio" name="focus" value="career-growth">
                                📈 Career growth focus
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Model Configuration -->
            <div class="section">
                <h2>🔧 AI Model Configuration</h2>
                <div class="model-selection">
                    <label>
                        <input type="radio" name="model" value="hybrid" checked>
                        🎯 Hybrid (Recommended) - 30% Embedding + 70% GPT-4
                        <br><small style="color: var(--text-secondary);">Best balance of speed and accuracy</small>
                    </label>
                    <label>
                        <input type="radio" name="model" value="embedding">
                        ⚡ Embedding Only - Fast and cost-effective
                        <br><small style="color: var(--text-secondary);">Good for initial screening of large datasets</small>
                    </label>
                    <label>
                        <input type="radio" name="model" value="gpt4">
                        🧠 GPT-4 Only - Highest quality analysis
                        <br><small style="color: var(--text-secondary);">Most thorough but slower and more expensive</small>
                    </label>
                </div>
            </div>

            <!-- Start Button -->
            <div class="section" style="text-align: center;">
                <button class="btn-primary" onclick="startRanking()" style="font-size: 1rem; padding: 1rem 2rem;">
                    🚀 Start Ranking Process
                </button>
            </div>
        </div>

        <!-- Ranking Tab -->
        <div id="ranking" class="tab-content">
            <div class="ranking-progress">
                <h2>⚡ AI Ranking in Progress</h2>
                
                <!-- Batch Configuration -->
                <div class="section">
                    <h3>📊 Batch Configuration</h3>
                    <div class="progress-info">
                        <div class="batch-info">
                            <div>
                                <strong>Total Profiles:</strong> <span id="totalProfiles">847</span><br>
                                <small>Excluding header row</small>
                            </div>
                            <div>
                                <strong>Previously Ranked:</strong> <span id="previouslyRanked">0</span><br>
                                <small>From previous sessions</small>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                            <div>
                                <label>From Row:</label>
                                <input type="number" id="fromRow" value="2" min="2" style="width: 100%;">
                            </div>
                            <div>
                                <label>To Row:</label>
                                <input type="number" id="toRow" value="51" min="2" style="width: 100%;">
                            </div>
                            <div>
                                <label>Batch Size:</label>
                                <select id="batchSize" style="width: 100%;">
                                    <option value="20">20 profiles</option>
                                    <option value="50" selected>50 profiles</option>
                                    <option value="100">100 profiles</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="checkbox-grid" style="margin-top: 1rem;">
                            <label>
                                <input type="checkbox" id="skipRanked">
                                ⏭️ Skip already ranked profiles
                            </label>
                            <label>
                                <input type="checkbox" id="reRankWithFeedback">
                                🔄 Re-rank previous results with new feedback
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Progress Display -->
                <div class="progress-info">
                    <div class="batch-info">
                        <div>
                            <strong>Current Batch:</strong> <span id="currentBatch">1</span> of <span id="totalBatches">17</span><br>
                            <small>Processing rows <span id="currentRange">2-51</span></small>
                        </div>
                        <div>
                            <strong>Session Progress:</strong><br>
                            <span id="sessionProgress">35%</span> (175/500 total)<br>
                            <small>ETA: ~12 minutes | Cost: ~$2.50</small>
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 35%"></div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div style="background: var(--gray-50); padding: 0.75rem; border-radius: 6px;">
                            <strong>Current Batch Progress:</strong><br>
                            <span id="batchProgress">60%</span> (30/50 profiles)
                        </div>
                        <div style="background: var(--gray-50); padding: 0.75rem; border-radius: 6px;">
                            <strong>Results So Far:</strong><br>
                            <span id="currentResults">8 TOP, 15 GOOD candidates</span>
                        </div>
                    </div>
                </div>
                
                <!-- Controls -->
                <div class="ranking-controls">
                    <button class="btn-secondary" onclick="pauseRanking()">⏸️ Pause Ranking</button>
                    <button class="btn-primary" onclick="continueRanking()">▶️ Continue from Row 176</button>
                    <button class="btn-secondary" onclick="stopRanking()">⏹️ Stop & Review Results</button>
                </div>

                <!-- Feedback Section -->
                <div class="feedback-section">
                    <h3>📝 Provide Feedback</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        Adjust ranking criteria based on current results. Your feedback will improve future batches and can be applied to previous rankings.
                    </p>
                    <textarea id="feedbackText" placeholder="Example: 'The technical scores seem too high for junior developers. Focus more on practical experience vs theoretical knowledge.' or 'Give more weight to startup experience.'" rows="4"></textarea>
                    
                    <div style="margin: 1rem 0;">
                        <h4>📊 Feedback Impact Preview:</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 0.5rem;">
                            <div style="background: var(--gray-50); padding: 0.75rem; border-radius: 6px;">
                                <strong>Weight Adjustments:</strong><br>
                                <small>• Technical Weight: 85% → 70%</small><br>
                                <small>• Experience Weight: 60% → 80%</small>
                            </div>
                            <div style="background: var(--gray-50); padding: 0.75rem; border-radius: 6px;">
                                <strong>Apply To:</strong><br>
                                <label style="font-size: 0.9rem;"><input type="checkbox" checked> Future rankings</label><br>
                                <label style="font-size: 0.9rem;"><input type="checkbox"> Previous rankings</label>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn-secondary" onclick="applyFeedback()">💡 Apply Feedback & Continue</button>
                </div>
            </div>
        </div>
        <!-- Results Tab -->
        <div id="results" class="tab-content">
            <!-- Results Header -->
            <div class="results-header">
                <h2>📊 Ranking Results</h2>
                <div class="export-section">
                    <button class="btn-primary" onclick="exportCandidates()">📥 Export CSV (Score ≥60)</button>
                    <button class="btn-secondary" onclick="exportInsights()">📄 Export AI Insights</button>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="results-summary">
                <div class="summary-card">
                    <h3>🏆 TOP Candidates</h3>
                    <div class="summary-number">23</div>
                    <p>75-100 score</p>
                </div>
                <div class="summary-card">
                    <h3>✅ GOOD Candidates</h3>
                    <div class="summary-number">19</div>
                    <p>60-74 score</p>
                </div>
                <div class="summary-card">
                    <h3>💎 Hidden Gems</h3>
                    <div class="summary-number">3</div>
                    <p>Special cases</p>
                </div>
                <div class="summary-card">
                    <h3>📋 Average</h3>
                    <div class="summary-number">45</div>
                    <p>Below 60 score</p>
                </div>
            </div>

            <!-- TOP Candidates (75-100) -->
            <div class="section">
                <h2>🏆 TOP Candidates (75-100)</h2>
                
                <!-- Alex Semyzhonov -->
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Alex Semyzhonov</h3>
                            <p>Full Stack Developer @ Inetex LTD</p>
                            <p>📍 Ramat Gan, Tel Aviv District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-top">🏆 TOP CANDIDATE</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">87/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">92/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">85/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">88/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">84/100</div>
                        </div>
                    </div>

                    <div class="strengths-concerns">
                        <div class="strengths">
                            <h4>💪 Strengths</h4>
                            <ul>
                                <li>Full-stack expertise in React, Redux, Spring Boot</li>
                                <li>Microservices architecture experience</li>
                                <li>Clean Architecture implementation</li>
                                <li>Strong educational background from Tel-Ran</li>
                                <li>Startup founder mindset</li>
                            </ul>
                        </div>
                        <div class="concerns">
                            <h4>⚠️ Concerns</h4>
                            <ul>
                                <li>May need DevOps mentoring for scaling</li>
                                <li>Limited enterprise-level experience</li>
                                <li>Transition period from statistics background</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🧠 AI Insights</h4>
                        <p>Strong technical foundation with modern tech stack. Shows entrepreneurial spirit with startup founding experience. Good cultural fit for innovative environments. Career progression indicates rapid learning ability.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/alex-semyzhonov" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="saveFavorite('alex-semyzhonov')">⭐ Save to Favorites</button>
                        <button class="action-btn" onclick="scheduleInterview('alex-semyzhonov')">📅 Schedule Interview</button>
                    </div>
                </div>

                <!-- Dror Reshef -->
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Dror Reshef</h3>
                            <p>Full-stack Developer @ SuperCom (NASDAQ: SPCB)</p>
                            <p>📍 Tel Aviv District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-top">🏆 TOP CANDIDATE</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">82/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">89/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">78/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">85/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">76/100</div>
                        </div>
                    </div>

                    <div class="strengths-concerns">
                        <div class="strengths">
                            <h4>💪 Strengths</h4>
                            <ul>
                                <li>Excellence graduate from Tel Aviv University</li>
                                <li>Real-time communication expertise (SignalR)</li>
                                <li>C# .NET Core and React proficiency</li>
                                <li>RabbitMQ distributed messaging experience</li>
                                <li>Research and mobile development background</li>
                            </ul>
                        </div>
                        <div class="concerns">
                            <h4>⚠️ Concerns</h4>
                            <ul>
                                <li>More backend-focused, may need frontend guidance</li>
                                <li>Limited startup environment exposure</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🧠 AI Insights</h4>
                        <p>Excellent academic background with practical application. Strong in enterprise-level development. Shows versatility across platforms (React-Native, Android). Good problem-solving skills evident from research background.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/dror-reshef-1a9533a" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="saveFavorite('dror-reshef')">⭐ Save to Favorites</button>
                        <button class="action-btn" onclick="scheduleInterview('dror-reshef')">📅 Schedule Interview</button>
                    </div>
                </div>

                <!-- Tomer Landesman -->
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Tomer Landesman</h3>
                            <p>Fullstack Software Engineer @ env0</p>
                            <p>📍 Adi, North District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-top">🏆 TOP CANDIDATE</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">79/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">91/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">75/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">82/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">88/100</div>
                        </div>
                    </div>

                    <div class="strengths-concerns">
                        <div class="strengths">
                            <h4>💪 Strengths</h4>
                            <ul>
                                <li>IaC and DevOps expertise (Terraform, Kubernetes)</li>
                                <li>Full ownership of feature lifecycle</li>
                                <li>AWS services proficiency</li>
                                <li>CI/CD pipeline experience</li>
                                <li>Computer Science degree from Technion</li>
                            </ul>
                        </div>
                        <div class="concerns">
                            <h4>⚠️ Concerns</h4>
                            <ul>
                                <li>May be over-qualified for junior positions</li>
                                <li>Strong DevOps focus might limit pure dev work</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🧠 AI Insights</h4>
                        <p>Modern tech stack expertise with strong DevOps background. Shows leadership in feature development. Great fit for startups needing infrastructure scaling. Military background suggests strong discipline and teamwork.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/tomerlm" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="saveFavorite('tomer-landesman')">⭐ Save to Favorites</button>
                        <button class="action-btn" onclick="scheduleInterview('tomer-landesman')">📅 Schedule Interview</button>
                    </div>
                </div>
            </div>

            <!-- GOOD Candidates (60-74) -->
            <div class="section">
                <h2>✅ GOOD Candidates (60-74)</h2>
                
                <!-- Aviram Shubeili -->
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Aviram Shubeili</h3>
                            <p>Software Engineer @ Philips</p>
                            <p>📍 Haifa, Haifa District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-good">✅ GOOD CANDIDATE</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">71/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">85/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">68/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">75/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">62/100</div>
                        </div>
                    </div>

                    <div class="strengths-concerns">
                        <div class="strengths">
                            <h4>💪 Strengths</h4>
                            <ul>
                                <li>Technion CS graduate (GPA 90+)</li>
                                <li>3+ years backend and cloud experience</li>
                                <li>Microsoft ecosystem expertise</li>
                                <li>Navy engineering background</li>
                                <li>Knowledge sharing and documentation focus</li>
                            </ul>
                        </div>
                        <div class="concerns">
                            <h4>⚠️ Concerns</h4>
                            <ul>
                                <li>Limited startup environment experience</li>
                                <li>More enterprise-focused background</li>
                                <li>May need cultural adaptation for fast-paced environments</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🧠 AI Insights</h4>
                        <p>Strong technical foundation with excellent academic background. Shows commitment to continuous learning and AI tools exploration. Military engineering experience indicates discipline and problem-solving skills.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/aviram-shubeili" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="saveFavorite('aviram-shubeili')">⭐ Save to Favorites</button>
                        <button class="action-btn" onclick="scheduleInterview('aviram-shubeili')">📅 Schedule Interview</button>
                    </div>
                </div>

                <!-- Leon Kannanovich -->
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Leon Kannanovich</h3>
                            <p>Full Stack Developer @ Sapiens Decision</p>
                            <p>📍 Ashdod, South District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-good">✅ GOOD CANDIDATE</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">68/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">78/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">65/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">70/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">58/100</div>
                        </div>
                    </div>

                    <div class="strengths-concerns">
                        <div class="strengths">
                            <h4>💪 Strengths</h4>
                            <ul>
                                <li>Ben-Gurion University CS student</li>
                                <li>Strong programming fundamentals (Java, C++, Python)</li>
                                <li>Military service experience</li>
                                <li>OOP and concurrent programming skills</li>
                            </ul>
                        </div>
                        <div class="concerns">
                            <h4>⚠️ Concerns</h4>
                            <ul>
                                <li>Still completing degree</li>
                                <li>Limited professional experience</li>
                                <li>No clear startup or fast-growth experience</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🧠 AI Insights</h4>
                        <p>Good foundational technical skills with ongoing formal education. Military background suggests discipline. Could be a good junior hire with proper mentoring and growth opportunities.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/leon-kannanovich-414a64120" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="saveFavorite('leon-kannanovich')">⭐ Save to Favorites</button>
                        <button class="action-btn" onclick="scheduleInterview('leon-kannanovich')">📅 Schedule Interview</button>
                    </div>
                </div>
            </div>

            <!-- Hidden Gems -->
            <div class="section">
                <h2>💎 Hidden Gems</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                    Candidates with overall lower scores but exceptional qualities in specific areas that might make them valuable additions.
                </p>

                <!-- Israel Zanani -->
                <div class="candidate-card" style="border-left: 4px solid #06b6d4;">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Israel Zanani</h3>
                            <p>Full Stack Engineer @ Harel Insurance & Finance</p>
                            <p>📍 Center District, Israel</p>
                        </div>
                        <div class="candidate-badge badge-hidden">💎 HIDDEN GEM</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">58/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">82/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">45/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">76/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">35/100</div>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🔍 Why This Candidate is a Hidden Gem</h4>
                        <p>Despite lower overall score due to enterprise background, shows exceptional technical skills and continuous learning. Strong foundation in multiple tech stacks (React, Angular, Node.js, Java Spring). Could excel in right environment with proper cultural onboarding.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/israel-zanani-b7aa1a134" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="considerForOutreach('israel-zanani')" style="background: #06b6d4; color: white;">💎 Consider for Outreach</button>
                        <button class="action-btn" onclick="dismissCandidate('israel-zanani')">❌ Dismiss</button>
                    </div>
                </div>

                <!-- Michal Dan -->
                <div class="candidate-card" style="border-left: 4px solid #06b6d4;">
                    <div class="candidate-header">
                        <div class="candidate-info">
                            <h3>Michal Dan</h3>
                            <p>Senior Frontend Developer @ Bringg</p>
                            <p>📍 Israel</p>
                        </div>
                        <div class="candidate-badge badge-hidden">💎 HIDDEN GEM</div>
                    </div>
                    
                    <div class="scores-grid">
                        <div class="score-item">
                            <div class="label">Overall</div>
                            <div class="value">55/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Technical</div>
                            <div class="value">88/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Cultural</div>
                            <div class="value">42/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Experience</div>
                            <div class="value">70/100</div>
                        </div>
                        <div class="score-item">
                            <div class="label">Startup</div>
                            <div class="value">38/100</div>
                        </div>
                    </div>

                    <div class="ai-insights">
                        <h4>🔍 Why This Candidate is a Hidden Gem</h4>
                        <p>Senior-level frontend expertise with strong React.js skills. Ben-Gurion University background. Experience at growth company (Bringg). Lower cultural score due to limited profile information, but technical indicators are very strong.</p>
                    </div>

                    <div class="candidate-actions">
                        <a href="https://linkedin.com/in/michal-dan-639983a7" target="_blank" class="action-btn primary">🔗 View LinkedIn</a>
                        <button class="action-btn" onclick="considerForOutreach('michal-dan')" style="background: #06b6d4; color: white;">💎 Consider for Outreach</button>
                        <button class="action-btn" onclick="dismissCandidate('michal-dan')">❌ Dismiss</button>
                    </div>
                </div>
            </div>

            <!-- Profiles with Insufficient Data -->
            <div class="section">
                <h2>❓ Profiles with Insufficient Data</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    Profiles that couldn't be properly ranked due to missing or limited information.
                </p>
                
                <div style="display: grid; gap: 0.75rem;">
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Stav A.</strong> - Full Stack Developer @ ControlUp<br>
                            <small style="color: var(--text-secondary);">Reason: Limited job description and skills information</small>
                        </div>
                        <a href="https://linkedin.com/in/stavab" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Vakho Baratashvili</strong> - Senior Software Engineer @ VFR<br>
                            <small style="color: var(--text-secondary);">Reason: Incomplete education and previous experience data</small>
                        </div>
                        <a href="https://linkedin.com/in/vakho-baratashvili-05895b55" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Luba Epshtein</strong> - Full Stack Developer @ bolt<br>
                            <small style="color: var(--text-secondary);">Reason: Missing detailed technical skills information</small>
                        </div>
                        <a href="https://linkedin.com/in/luba-epshtein-2aa0bb164" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Mor Tabib</strong> - Full Stack Developer @ Outseer<br>
                            <small style="color: var(--text-secondary);">Reason: Limited job description details</small>
                        </div>
                        <a href="https://linkedin.com/in/morbokobza" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Shir Engel</strong> - Full Stack Developer @ ZoomInfo<br>
                            <small style="color: var(--text-secondary);">Reason: Incomplete work experience timeline</small>
                        </div>
                        <a href="https://linkedin.com/in/shir-engel" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Tal Yohay</strong> - Full Stack Developer @ Nipendo<br>
                            <small style="color: var(--text-secondary);">Reason: Mixed education and work timeline data</small>
                        </div>
                        <a href="https://linkedin.com/in/tal-yohay" target="_blank" class="action-btn">🔗 View Profile</a>
                    </div>
                </div>
            </div>
            <!-- Smart AI Engine Insights -->
            <div class="ai-insights-panel">
                <h2>🧠 Smart AI Engine Insights</h2>
                
                <div class="insights-grid">
                    <!-- Common Success Patterns -->
                    <div class="insight-section">
                        <h3>📈 Common Success Patterns</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Analysis of shared traits among candidates scoring ≥60
                        </p>
                        <div class="insight-list">
                            <li>💼 <strong>Company Background:</strong> 78% come from tech companies with 50+ employees</li>
                            <li>🎓 <strong>Education:</strong> 85% have Computer Science or related degrees</li>
                            <li>🚀 <strong>Career Progression:</strong> Average 2.3 promotions in last 5 years</li>
                            <li>⚡ <strong>Tech Stack:</strong> React + Node.js combination appears in 67% of top candidates</li>
                            <li>🏆 <strong>Excellence Indicators:</strong> 42% show at least one excellence marker</li>
                        </div>
                    </div>

                    <!-- Top Companies for Talent -->
                    <div class="insight-section">
                        <h3>🏢 Top Companies for Talent</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Companies with highest-scoring alumni in your search
                        </p>
                        <div class="insight-list">
                            <li>🥇 <strong>Technion Alumni:</strong> Average score 84/100 (3 candidates)</li>
                            <li>🥈 <strong>env0:</strong> Average score 79/100 (1 candidate)</li>
                            <li>🥉 <strong>SuperCom:</strong> Average score 82/100 (1 candidate)</li>
                            <li>🏆 <strong>Tel Aviv University:</strong> Average score 78/100 (2 candidates)</li>
                            <li>📊 <strong>EPAM Systems:</strong> Good technical foundation (1 candidate)</li>
                        </div>
                    </div>

                    <!-- Recommended Searches -->
                    <div class="insight-section">
                        <h3>🔍 Recommended Searches</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Targeted searches based on successful patterns identified
                        </p>
                        <div class="insight-list">
                            <li>🎯 "Search for Senior Full Stack developers from Technion with React experience"</li>
                            <li>🎯 "Look for env0 alumni with Infrastructure as Code background"</li>
                            <li>🎯 "Find Tel Aviv University CS graduates in fintech companies"</li>
                            <li>🎯 "Search for developers with military technology unit experience"</li>
                            <li>🎯 "Look for React + Spring Boot specialists in Israeli startups"</li>
                        </div>
                    </div>

                    <!-- Skills Gap Analysis -->
                    <div class="insight-section">
                        <h3>📊 Skills Gap Analysis</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Areas where candidates could strengthen their profiles
                        </p>
                        <div class="insight-list">
                            <li>⚠️ <strong>DevOps Skills:</strong> Only 23% show strong CI/CD experience</li>
                            <li>⚠️ <strong>Cloud Platforms:</strong> AWS experience varies significantly</li>
                            <li>⚠️ <strong>Testing:</strong> Limited automated testing mentions</li>
                            <li>⚠️ <strong>Leadership:</strong> 34% show clear leadership progression</li>
                            <li>⚠️ <strong>Startup Experience:</strong> 28% have fast-growth company background</li>
                        </div>
                    </div>

                    <!-- Geographic Distribution -->
                    <div class="insight-section">
                        <h3>🗺️ Geographic Distribution</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Location analysis of high-scoring candidates
                        </p>
                        <div class="insight-list">
                            <li>📍 <strong>Tel Aviv District:</strong> 67% of TOP candidates (highest concentration)</li>
                            <li>📍 <strong>Haifa District:</strong> 22% of TOP candidates (strong technical focus)</li>
                            <li>📍 <strong>Center District:</strong> 11% of TOP candidates</li>
                            <li>📍 <strong>Remote Work:</strong> 78% mention remote-friendly experience</li>
                            <li>📍 <strong>Relocation:</strong> 34% open to location changes</li>
                        </div>
                    </div>

                    <!-- Career Trajectory Analysis -->
                    <div class="insight-section">
                        <h3>📈 Career Trajectory Analysis</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Career progression patterns among successful candidates
                        </p>
                        <div class="insight-list">
                            <li>⏱️ <strong>Promotion Speed:</strong> Top candidates average 18 months per promotion</li>
                            <li>🔄 <strong>Job Stability:</strong> Average 2.8 years per position (healthy progression)</li>
                            <li>📚 <strong>Continuous Learning:</strong> 67% show recent skill acquisitions</li>
                            <li>🚀 <strong>Startup Transition:</strong> 45% moved from enterprise to startup environments</li>
                            <li>💼 <strong>Role Evolution:</strong> 78% show clear specialization development</li>
                        </div>
                    </div>

                    <!-- Action Items -->
                    <div class="insight-section">
                        <h3>✅ Action Items</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Recommended next steps based on analysis
                        </p>
                        <div class="insight-list">
                            <li>🎯 <strong>Priority Outreach:</strong> Contact TOP candidates within 48 hours</li>
                            <li>🔍 <strong>Extended Search:</strong> Look for more Technion and TAU CS graduates</li>
                            <li>📞 <strong>Company Referrals:</strong> Ask current team for env0 and SuperCom connections</li>
                            <li>💡 <strong>Skill Development:</strong> Consider DevOps training for good technical candidates</li>
                            <li>🌟 <strong>Hidden Gems Review:</strong> Schedule calls with identified hidden gems</li>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PapaParse Library for CSV Processing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    
    <script>
        // Global Variables
        let currentSession = {
            id: generateSessionId(),
            csvData: null,
            filteredData: null,
            rankings: {},
            currentBatch: 1,
            totalBatches: 0,
            processedRows: 0,
            settings: {}
        };

        // Session Management
        function generateSessionId() {
            return 'scorely_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function saveSession() {
            localStorage.setItem('scorely_session', JSON.stringify(currentSession));
            localStorage.setItem('scorely_api_embedding', document.getElementById('embeddingApiKey').value);
            localStorage.setItem('scorely_api_gpt', document.getElementById('gptApiKey').value);
        }

        function loadSession() {
            const saved = localStorage.getItem('scorely_session');
            if (saved) {
                currentSession = JSON.parse(saved);
            }
            
            const embeddingKey = localStorage.getItem('scorely_api_embedding');
            const gptKey = localStorage.getItem('scorely_api_gpt');
            
            if (embeddingKey) document.getElementById('embeddingApiKey').value = embeddingKey;
            if (gptKey) document.getElementById('gptApiKey').value = gptKey;
        }

        function resetSession() {
            if (confirm('Are you sure you want to reset the current session? All progress will be lost.')) {
                localStorage.removeItem('scorely_session');
                currentSession = {
                    id: generateSessionId(),
                    csvData: null,
                    filteredData: null,
                    rankings: {},
                    currentBatch: 1,
                    totalBatches: 0,
                    processedRows: 0,
                    settings: {}
                };
                location.reload();
            }
        }

        // Tab Navigation
        function initTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn:not(.reset-btn)');
            const tabContents = document.querySelectorAll('.tab-content');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetTab = btn.getAttribute('data-tab');
                    
                    // Update button states
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Update content states
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === targetTab) {
                            content.classList.add('active');
                        }
                    });
                });
            });
        }

        // File Upload Handling
        function initFileUpload() {
            const csvInput = document.getElementById('csvFile');
            const fileInfo = document.getElementById('fileInfo');
            
            csvInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file && file.type === 'text/csv') {
                    processCSVFile(file);
                    
                    // Show file info
                    document.getElementById('fileName').textContent = file.name;
                    document.getElementById('fileSize').textContent = formatFileSize(file.size);
                    fileInfo.style.display = 'block';
                } else {
                    alert('Please select a valid CSV file.');
                }
            });
        }

        function processCSVFile(file) {
            Papa.parse(file, {
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    currentSession.csvData = results.data;
                    document.getElementById('fileRows').textContent = results.data.length + ' (excluding header)';
                    
                    // Update batch configuration
                    updateBatchConfiguration();
                    saveSession();
                    
                    console.log('CSV processed:', results.data.length, 'rows');
                },
                error: function(error) {
                    alert('Error processing CSV file: ' + error.message);
                }
            });
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateBatchConfiguration() {
            if (currentSession.csvData) {
                const totalRows = currentSession.csvData.length;
                document.getElementById('totalProfiles').textContent = totalRows;
                document.getElementById('toRow').value = Math.min(51, totalRows + 1);
                document.getElementById('toRow').max = totalRows + 1;
            }
        }

        // Ideal Profiles Handling
        function initIdealProfiles() {
            // Profile 1
            document.getElementById('p1-pdf').addEventListener('change', () => {
                if (document.getElementById('p1-pdf').checked) {
                    document.getElementById('profile1File').click();
                }
            });
            
            document.getElementById('p1-text').addEventListener('change', () => {
                if (document.getElementById('p1-text').checked) {
                    document.getElementById('profile1Text').focus();
                }
            });

            // Profile 2
            document.getElementById('p2-pdf').addEventListener('change', () => {
                if (document.getElementById('p2-pdf').checked) {
                    document.getElementById('profile2File').click();
                }
            });
            
            document.getElementById('p2-text').addEventListener('change', () => {
                if (document.getElementById('p2-text').checked) {
                    document.getElementById('profile2Text').focus();
                }
            });
        }

        // Ranking Process
        function startRanking() {
            // Validate inputs
            if (!currentSession.csvData) {
                alert('Please upload a CSV file first.');
                return;
            }

            const gptKey = document.getElementById('gptApiKey').value.trim();
            if (!gptKey) {
                alert('Please enter your GPT API key.');
                return;
            }

            const jobDesc = document.getElementById('jobDesc').value.trim();
            if (!jobDesc) {
                alert('Please enter a job description.');
                return;
            }

            // Collect settings
            currentSession.settings = {
                embeddingApiKey: document.getElementById('embeddingApiKey').value.trim(),
                gptApiKey: gptKey,
                jobDescription: jobDesc,
                blacklistCompanies: document.getElementById('blacklistCompanies').value.split(',').map(s => s.trim()).filter(s => s),
                inProcessCandidates: document.getElementById('inProcessCandidates').value.split(',').map(s => s.trim()).filter(s => s),
                idealProfile1: document.getElementById('profile1Text').value.trim(),
                idealProfile2: document.getElementById('profile2Text').value.trim(),
                excellenceIndicators: getSelectedExcellenceIndicators(),
                educationLevel: document.getElementById('educationLevel').value,
                location: document.getElementById('location').value.trim(),
                leadershipExperience: getSelectedLeadership(),
                keyAchievements: document.getElementById('keyAchievements').value.trim(),
                additionalKeywords: document.getElementById('additionalKeywords').value.trim(),
                aiInstructions: document.getElementById('aiInstructions').value.trim(),
                focus: document.querySelector('input[name="focus"]:checked')?.value || '',
                model: document.querySelector('input[name="model"]:checked')?.value || 'hybrid'
            };

            saveSession();
            
            // Switch to ranking tab
            document.querySelector('[data-tab="ranking"]').click();
            
            // Start the ranking simulation
            simulateRanking();
        }

        function getSelectedExcellenceIndicators() {
            const indicators = [];
            if (document.getElementById('academic-excellence').checked) indicators.push('academic-excellence');
            if (document.getElementById('industry-awards').checked) indicators.push('industry-awards');
            if (document.getElementById('military-elite').checked) indicators.push('military-elite');
            if (document.getElementById('high-impact').checked) indicators.push('high-impact');
            if (document.getElementById('rapid-advancement').checked) indicators.push('rapid-advancement');
            if (document.getElementById('publications').checked) indicators.push('publications');
            return indicators;
        }

        function getSelectedLeadership() {
            const leadership = [];
            if (document.getElementById('team-lead').checked) leadership.push('team-lead');
            if (document.getElementById('manager').checked) leadership.push('manager');
            if (document.getElementById('executive').checked) leadership.push('executive');
            return leadership;
        }

        function simulateRanking() {
            const fromRow = parseInt(document.getElementById('fromRow').value);
            const toRow = parseInt(document.getElementById('toRow').value);
            const batchSize = parseInt(document.getElementById('batchSize').value);
            
            currentSession.totalBatches = Math.ceil((toRow - fromRow + 1) / batchSize);
            currentSession.processedRows = fromRow - 2; // Adjust for 0-based indexing excluding header
            
            updateProgressDisplay();
            
            // Simulate batch processing
            const processingInterval = setInterval(() => {
                currentSession.processedRows += Math.min(5, batchSize - (currentSession.processedRows % batchSize));
                updateProgressDisplay();
                
                if (currentSession.processedRows >= toRow - 1) {
                    clearInterval(processingInterval);
                    completeRanking();
                }
            }, 500);
        }

        function updateProgressDisplay() {
            const fromRow = parseInt(document.getElementById('fromRow').value);
            const toRow = parseInt(document.getElementById('toRow').value);
            const totalToProcess = toRow - fromRow + 1;
            const processed = Math.min(currentSession.processedRows - fromRow + 2, totalToProcess);
            
            const progressPercent = Math.round((processed / totalToProcess) * 100);
            const currentBatch = Math.ceil(processed / parseInt(document.getElementById('batchSize').value));
            
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('sessionProgress').textContent = progressPercent + '%';
            document.getElementById('currentBatch').textContent = currentBatch;
            document.getElementById('totalBatches').textContent = currentSession.totalBatches;
            document.getElementById('currentRange').textContent = fromRow + '-' + Math.min(fromRow + processed - 1, toRow);
            document.getElementById('batchProgress').textContent = progressPercent + '%';
            document.getElementById('currentResults').textContent = Math.floor(processed * 0.16) + ' TOP, ' + Math.floor(processed * 0.32) + ' GOOD candidates';
        }

        function completeRanking() {
            alert('Ranking completed! Switch to Results tab to view candidates.');
            document.querySelector('[data-tab="results"]').click();
        }

        function pauseRanking() {
            alert('Ranking paused. You can continue from where you left off.');
        }

        function continueRanking() {
            alert('Continuing ranking from current position...');
            simulateRanking();
        }

        function stopRanking() {
            alert('Ranking stopped. Switching to results view.');
            document.querySelector('[data-tab="results"]').click();
        }

        function applyFeedback() {
            const feedback = document.getElementById('feedbackText').value.trim();
            if (!feedback) {
                alert('Please enter feedback before applying.');
                return;
            }
            
            alert('Feedback applied! Future rankings will be adjusted accordingly.');
            document.getElementById('feedbackText').value = '';
        }

        // Export Functions
        function exportCandidates() {
            const csvContent = generateCandidatesCSV();
            downloadCSV(csvContent, 'scorely_candidates_above_60_' + new Date().toISOString().split('T')[0] + '.csv');
        }

        function exportInsights() {
            const insights = generateInsightsReport();
            downloadTextFile(insights, 'scorely_ai_insights_' + new Date().toISOString().split('T')[0] + '.txt');
        }

        function generateCandidatesCSV() {
            // This would generate the actual CSV with all candidate data + scores
            const header = 'Name,Company,Position,Location,Overall Score,Technical Score,Cultural Score,Experience Score,Startup Score,Strengths,Concerns,LinkedIn URL\n';
            
            const candidates = [
                'Alex Semyzhonov,Inetex LTD,Full Stack Developer,"Ramat Gan, Israel",87,92,85,88,84,"Full-stack expertise, Microservices architecture","May need DevOps mentoring",https://linkedin.com/in/alex-semyzhonov',
                'Dror Reshef,SuperCom,Full-stack Developer,"Tel Aviv District, Israel",82,89,78,85,76,"Excellence graduate, Real-time communication expertise","More backend-focused",https://linkedin.com/in/dror-reshef-1a9533a',
                'Tomer Landesman,env0,Fullstack Software Engineer,"Adi, North District, Israel",79,91,75,82,88,"IaC and DevOps expertise, Full ownership","May be over-qualified for junior positions",https://linkedin.com/in/tomerlm'
            ];
            
            return header + candidates.join('\n');
        }

        function generateInsightsReport() {
            return `Scorely Beta - AI Insights Report
Generated: ${new Date().toLocaleString()}

SUMMARY:
- Total profiles analyzed: 90
- TOP candidates (75-100): 23
- GOOD candidates (60-74): 19  
- Hidden Gems: 3

TOP PATTERNS:
- 78% from tech companies with 50+ employees
- 85% have CS or related degrees
- React + Node.js appears in 67% of top candidates
- Average 2.3 promotions in last 5 years

RECOMMENDED ACTIONS:
1. Priority outreach to TOP candidates within 48 hours
2. Extended search for Technion and TAU CS graduates
3. Company referrals from env0 and SuperCom connections
4. Consider DevOps training for good technical candidates
5. Schedule calls with identified hidden gems`;
        }

        function downloadCSV(content, filename) {
            const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
            downloadBlob(blob, filename);
        }

        function downloadTextFile(content, filename) {
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8;' });
            downloadBlob(blob, filename);
        }

        function downloadBlob(blob, filename) {
            const link = document.createElement('a');
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // Candidate Actions
        function saveFavorite(candidateId) {
            alert('Candidate saved to favorites: ' + candidateId);
        }

        function scheduleInterview(candidateId) {
            alert('Interview scheduling opened for: ' + candidateId);
        }

        function considerForOutreach(candidateId) {
            alert('Candidate marked for outreach consideration: ' + candidateId);
        }

        function dismissCandidate(candidateId) {
            if (confirm('Are you sure you want to dismiss this candidate?')) {
                alert('Candidate dismissed: ' + candidateId);
            }
        }

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initTabs();
            initFileUpload();
            initIdealProfiles();
            loadSession();
            
            console.log('Scorely Beta initialized successfully');
        });

        // Auto-save on input changes
        document.addEventListener('input', function(e) {
            if (e.target.type === 'text' || e.target.type === 'textarea' || e.target.type === 'password') {
                setTimeout(saveSession, 1000); // Auto-save after 1 second of inactivity
            }
        });

        // Handle page unload
        window.addEventListener('beforeunload', function(e) {
            saveSession();
        });
    </script>
</body>
</html>

